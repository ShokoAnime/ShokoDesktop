<UserControl x:Class="JMMClient.UserControls.DashboardControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:usercontrols="clr-namespace:JMMClient.UserControls"
             xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
             xmlns:local="clr-namespace:JMMClient"
             xmlns:mwt="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles.xaml" />
                <ResourceDictionary Source="/Resources/DashboardStyles.xaml" />
                <ResourceDictionary Source="/Resources/MainListStyles.xaml" />
                <ResourceDictionary Source="/Resources/MainListContent.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <local:DashWatchNextTemplateSelector x:Key="DashWatchNextTemplateSelector"/>
            <local:TraktActivityTemplateSelector x:Key="TraktTemplateSelector"/>
            <local:RecWatchTemplateSelector x:Key="RecWatchTemplateSelector"/>
            <local:RecDownloadTemplateSelector x:Key="RecDownloadTemplateSelector"/>
            <local:DashRecentAdditionsTemplateSelector x:Key="DashRecentAdditionsTemplateSelector"/>

            <RoutedUICommand x:Key="PlayEpisodeCommand" Text="PlayEpisodeCommand" />
            <RoutedUICommand x:Key="PlayAllUnwatchedEpisodeCommand" Text="PlayAllUnwatchedEpisodeCommand" />
            <RoutedUICommand x:Key="ToggleWatchedStatusCommand" Text="ToggleWatchedStatusCommand" />
            <RoutedUICommand x:Key="IgnoreAnimeWatchCommand" Text="IgnoreAnimeWatchCommand" />
            <RoutedUICommand x:Key="IgnoreAnimeDownloadCommand" Text="IgnoreAnimeDownloadCommand" />

            <RoutedUICommand x:Key="MoveUpWidgetCommand" Text="MoveUpWidgetCommand" />
            <RoutedUICommand x:Key="MoveDownWidgetCommand" Text="MoveDownWidgetCommand" />

            <RoutedUICommand x:Key="SyncVotesCommand" Text="SyncVotesCommand" />
            <RoutedUICommand x:Key="FriendRequestApproveCommand" Text="FriendRequestApproveCommand" />
            <RoutedUICommand x:Key="FriendRequestDenyCommand" Text="FriendRequestDenyCommand" />

            <!-- WatchNextTemplate -->
            <DataTemplate x:Key="WatchNextTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <StackPanel Orientation="Vertical">
                        <!-- Anime name and episode details -->
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" MinWidth="{Binding Path=ActualWidth, ElementName=pnlButtons}"
                                    MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}">
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" />
                            <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"/>
                        </StackPanel>

                        <!-- Anime image -->
                        <StackPanel Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_WatchNext_Height}"
                                    Orientation="Horizontal">
                            <Border BorderThickness="1" BorderBrush="DarkGray" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_WatchNext_Height}">
                                    <Image.ToolTip>
                                        <local:CustomToolTip>
                                            <usercontrols:DashboardEpisodeOverviewTooltipContent/>
                                        </local:CustomToolTip>
                                    </Image.ToolTip>
                                </Image>
                            </Border>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,0" x:Name="pnlButtons">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play2.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Play}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                       ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </DataTemplate>

            <!-- WatchNextTemplate_Detailed -->
            <DataTemplate x:Key="WatchNextTemplate_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid x:Name="Container">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- Episode overview -->
                        <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Grid.Row="2" Grid.Column="0"
                                    Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_WatchNext_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_WatchNext_Height}"/>
                            </Border>

                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="4,-28,0,4" VerticalAlignment="Bottom"
                                    Grid.Row="2" Grid.Column="0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}"
                                    Command="{StaticResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" ToolTip="Play">
                                <Image Height="16" Width="16" Source="/Images/32_play2.png" Margin="2,0,3,0"/>
                            </Button>

                            <!-- Play all episodes button -->
                            <Button x:Name="btnPlayAll" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" Command="{StaticResource PlayAllUnwatchedEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" Visibility="{Binding Path=MultipleUnwatchedEpsSeries, Converter={StaticResource BooleanToVisibilityConverter}}"
                                    ToolTip="Play all episodes (sent as a playlist to the default player)">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play2_all.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Binding Path=UnwatchedEpCountSeries}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <!-- Anime name and episode details -->
                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Show pinned series button -->
                            <Button Margin="7,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                    ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"
                                    ToolTipService.ShowDuration="60000" Grid.Row="0" Grid.Column="1">
                                <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0"/>
                            </Button>
                            
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" Grid.Column="0" Grid.Row="0"/>
                        </Grid>

                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"
                                   Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left"
                                   MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecentlyWatchedEpisodeTemplate -->
            <DataTemplate x:Key="RecentlyWatchedEpisodeTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <StackPanel Orientation="Vertical">
                        <!-- Anime name and episode details -->
                        <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}"/>
                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"/>
                        
                        <StackPanel Orientation="Horizontal" Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecentlyWatchedEp_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecentlyWatchedEp_Height}"/>
                            </Border>
                            
                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>
                        
                        <!-- Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Visibility="{Binding Path=HasFiles, Converter={StaticResource BooleanToVisibilityConverter}}"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play2.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Play}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                       ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                            </Button>

                            <TextBlock Text="Last Watched" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <TextBlock Text="{Binding Path=WatchedDateAsString}" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </DataTemplate>
            
            <!-- SeriesMissingEpsTemplate -->
            <DataTemplate x:Key="SeriesMissingEpsTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <DockPanel>
                        <StackPanel Orientation="Vertical" x:Name="pnlDetails" DockPanel.Dock="Bottom">
                            <!-- Anime image -->
                            <StackPanel Orientation="Horizontal" Margin="0,5,0,5"
                                        Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_MissingEps_Height}">
                                <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                           MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_MissingEps_Height}"/>
                                </Border>
                            </StackPanel>
                            
                            <Grid HorizontalAlignment="Left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                            
                                <!-- Show pinned series button -->
                                <Button Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center" Margin="0,0,5,0"
                                        Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                        Grid.Column="0" Grid.Row="0" Grid.RowSpan="2">
                                    <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                </Button>

                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=LatestEp_Anime}" Foreground="Black"
                                           VerticalAlignment="Center" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="0"/>
                                <TextBlock Text="{Binding Path=AniDB_Anime.LatestEpisodeNumber}" Foreground="Black" FontWeight="Bold"
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="0" Margin="8,0,0,0"/>
                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=MissingEpisodeCount}" Foreground="Black"
                                           VerticalAlignment="Center" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="1"/>
                                <TextBlock Text="{Binding Path=MissingEpisodeCountGroups}" Foreground="Black" FontWeight="Bold" Margin="8,0,0,0"
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1"/>
                            </Grid>
                        </StackPanel>

                        <TextBlock Text="{Binding Path=SeriesName}" DockPanel.Dock="Top" Style="{StaticResource DashAnimeTitle}"
                                   MaxWidth="{Binding Path=ActualWidth, ElementName=pnlDetails}" FontSize="11"/>
                    </DockPanel>
                </Border>
            </DataTemplate>

            <!-- MiniCalendarTemplate -->
            <DataTemplate x:Key="MiniCalendarTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- AniDB link -->
                        <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=AnimeID_Friendly}"
                                                        URL="{Binding Path=AniDB_SiteURL}" Grid.Row="1" Grid.Column="0"/>

                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Grid.Row="2" Grid.Column="0" x:Name="pnlImageAndInfo">
                            <!-- Anime image -->
                            <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Margin="0,5,0,5"
                                        Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_MiniCalendar_Height}">
                                <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Image Source="{Binding Path=DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                           MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_MiniCalendar_Height}"/>
                                </Border>
                            </StackPanel>
                        
                            <!-- Info -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <!-- Show create series from button -->
                                <Button Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center" ToolTipService.ShowDuration="60000"
                                        ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_CreateSeries}"
                                        Command="{DynamicResource ResourceKey=CreateSeriesFromAnimeCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/16_television.png" Margin="2,0,2,0"/>
                                </Button>

                                <!-- Bookmark anime button -->
                                <Button Margin="5,0,0,0" Style="{StaticResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ResourceKey=BookmarkAnimeCommand}" CommandParameter="{Binding}"
                                        ToolTip="Bookmark this anime to download later" ToolTipService.ShowDuration="60000">
                                    <Image Height="16" Width="16" Source="/Images/32_bookmark.png" Margin="1,0,1,0"/>
                                </Button>

                                <!-- Download button -->
                                <Button Margin="5,0,2,0" Style="{StaticResource FlatButtonStyle}" VerticalAlignment="Center"
                                        x:Name="btnSearchDownloads" ToolTipService.ShowDuration="60000"
                                        Command="{DynamicResource ResourceKey=ShowTorrentSearchCommand}" CommandParameter="{Binding}"
                                        ToolTip="Search for downloads for this series">
                                    <Image Height="16" Width="16" Source="/Images/24_download3.png" Margin="2,0,2,0"/>
                                </Button>

                                <Image Height="16" Width="16" Source="/Images/32_calendar.png" Margin="5,0,5,0" VerticalAlignment="Center"/>
                                <TextBlock Padding="5" Foreground="Black"  Text="{Binding Path=AirDateAsString}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="{Binding Path=FormattedTitle}" Style="{StaticResource DashAnimeTitle}" FontSize="11"
                                   Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlImageAndInfo}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecWatch_Detailed -->
            <DataTemplate x:Key="RecWatch_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- show pinned series button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource IgnoreAnimeWatchCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/32_cancel.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_IgnoreAnimeWatch}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Approval" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200"  Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"
                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Your Vote" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- RecDownload_Detailed -->
            <DataTemplate x:Key="RecDownload_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14"
                                           VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource IgnoreAnimeDownloadCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/32_cancel.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_IgnoreAnimeDownload}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- bookmark anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource BookmarkAnimeCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/32_bookmark.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="Bookmark this anime to download later"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- download button -->
                                <Button Grid.Column="3"  Margin="5,0,2,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center" Name="btnSearchDownloads"
                                        Command="{DynamicResource ShowTorrentSearchCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/24_download3.png" Margin="2,0,2,0">
                                        <Image.ToolTip>
                                            <TextBlock Text="Search for downloads for this series"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Approval" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200"  Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"
                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Your Vote" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- TraktFriendTemplate -->
            <DataTemplate x:Key="TraktFriendTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="1" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <TextBlock Text="{Binding Path=Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Username}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=Url}" Margin="0,0,0,0"/>
                            <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" VerticalAlignment="Center" Margin="0,3,0,0" ToolTipService.ShowDuration="60000">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- avatar image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  Margin="5,3,10,0"
                               HorizontalAlignment="Left" 
                               Source="{Binding ImagePathForDisplay}">
                        </Image>
                    </Border>

                    <!-- watched details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="0,3,5,5">
                            <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                <TextBlock Text="Most Recently Watched" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.WatchedDateAsString}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,3,5,5">
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.ShowTitle}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center"/>

                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Season}" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <TextBlock Text="x" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0"/>
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Number}" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0"/>

                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Title}" Foreground="DarkGreen" FontSize="14" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Episode Overview  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200" Text="{Binding LastEpisodeWatched.Episode_Overview}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,0" 
                                   Visibility="{Binding ShowEpisodeOverviewInExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- Episode Image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Source="{Binding LastEpisodeWatched.ImagePathForDisplay}" 
                               Visibility="{Binding ShowEpisodeImageInDashboard, Converter={StaticResource BooleanToVisibilityConverter}}"
                               Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                               Margin="5,5,5,5" VerticalAlignment="Top" HorizontalAlignment="Left" ToolTipService.ShowDuration="60000">
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="400" 
                                               Source="{Binding LastEpisodeWatched.ImagePathForDisplay}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding LastEpisodeWatched.Episode_Overview}" Foreground="Black"  HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- TraktFriendRequestTemplate -->
            <DataTemplate x:Key="TraktFriendRequestTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="3,3,3,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"  Background="Gainsboro">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Path=Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Username}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                                <TextBlock Text="has requested to add you as a friend" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>

                            <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=Url}" Margin="0,0,0,0"/>
                            <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" VerticalAlignment="Center" Margin="0,3,0,0" ToolTipService.ShowDuration="60000">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- avatar image  -->
                    <Border BorderThickness="3,0,0,3" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.RowSpan="1" Background="Gainsboro">
                        <Border Margin="5,3,10,10" BorderThickness="0" BorderBrush="DarkGray">
                            <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  
                                   HorizontalAlignment="Left" 
                                   Source="{Binding ImagePathForDisplay}">
                            </Image>
                        </Border>
                    </Border>

                    <!-- approve / deny -->
                    <Border BorderThickness="0,0,3,3" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Background="Gainsboro">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="0,3,5,10">
                            <Button Name="btnFriendRequestApprove" Margin="0,5,10,10" Style="{DynamicResource RoundButtonStyle}" Foreground="Black"
                                Command="{DynamicResource FriendRequestApproveCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_tick.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="Approve" Foreground="Black"  Margin="0,0,5,0" Width="Auto"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnFriendRequestDeny" Margin="0,5,10,10" Style="{DynamicResource RoundButtonStyle}" Foreground="Black"
                                Command="{DynamicResource FriendRequestDenyCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_cancel.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="Deny" Foreground="Black"  Margin="0,0,5,0" Width="Auto"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- TraktActivityScrobbleTemplate -->
            <DataTemplate x:Key="TraktActivityScrobbleTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal">

                            <!-- user avatar -->
                            <Image  Height="60"  Margin="5,3,10,0"
                               HorizontalAlignment="Left"  ToolTipService.ShowDuration="60000"
                               Source="{Binding UserImagePathForDisplay}">
                                <Image.ToolTip>
                                    <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>

                                            <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                                   Source="{Binding UserImagePathForDisplay}" 
                                                   Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            </Image>
                                        </Grid>
                                    </Border>
                                </Image.ToolTip>
                            </Image>

                            <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                                <!-- user name, link -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,5,5">
                                    <TextBlock Text="{Binding Path=User.Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" 
                                               ToolTipService.ShowDuration="60000" VerticalAlignment="Center">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Username}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=User.Url}" Margin="10,0,0,0"/>
                                    <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0" ToolTipService.ShowDuration="60000">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                </StackPanel>

                                <!-- watched details -->
                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <Border BorderThickness="0" BorderBrush="Navy" Background="{StaticResource BlueGradientBrush}" Padding="6,3,3,3" CornerRadius="4">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Watched" Foreground="White" FontWeight="Bold" FontSize="12" VerticalAlignment="Center"/>
                                            <Image Height="16" Width="16" Source="/Images/trakt-icon-scrobble.png" Margin="10,0,2,0"/>
                                        </StackPanel>
                                    </Border>

                                    <TextBlock Text="{Binding Path=ElapsedShort}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    <TextBlock Text="ago" Foreground="Black" Margin="5,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" FontSize="14" DisplayText="{Binding Path=Episode.ShowTitleTruncated}" URL="{Binding Path=Episode.TraktShow.url}" Margin="0,0,0,0"/>

                                    <!-- show pinned series button -->
                                    <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center" Command="{DynamicResource ShowPinnedSeriesCommand}" 
                                            CommandParameter="{Binding}"
                                            Visibility="{Binding Episode.HasAnimeSeries, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                            </Image.ToolTip>
                                        </Image>
                                    </Button>

                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" Foreground="DarkGreen" FontSize="14" 
                                        DisplayText="{Binding Path=Episode.EpisodeDescription}" URL="{Binding Path=Episode.Episode_Url}" Margin="10,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Anime Poster  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  Margin="5,3,10,0"
                               HorizontalAlignment="Left" ToolTipService.ShowDuration="60000"
                               Source="{Binding AnimeImagePathForDisplay}">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                               Source="{Binding AnimeImagePathForDisplay}" 
                                               Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- Episode Overview  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200" Text="{Binding Episode.Episode_Overview}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,0" 
                                   Visibility="{Binding ShowEpisodeOverviewInDashboard, Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                                   VerticalAlignment="Top" TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- Episode Image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Source="{Binding Episode.ImagePathForDisplay}" ToolTipService.ShowDuration="60000"
                               Visibility="{Binding ShowEpisodeImageInDashboard, Converter={StaticResource BooleanToVisibilityConverter}}"
                               Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                               Margin="5,5,5,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="400" 
                                               Source="{Binding Episode.ImagePathForDisplay}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Episode.Episode_Overview}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- TraktActivityShoutEpisodeTemplate -->
            <DataTemplate x:Key="TraktActivityShoutEpisodeTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal">
                            <!-- user avatar -->
                            <Image Height="60"  Margin="5,3,10,0"
                                   HorizontalAlignment="Left" ToolTipService.ShowDuration="60000"
                                   Source="{Binding UserImagePathForDisplay}">
                                <Image.ToolTip>
                                    <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>

                                            <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                               Source="{Binding UserImagePathForDisplay}" 
                                                Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            </Image>
                                        </Grid>
                                    </Border>
                                </Image.ToolTip>
                            </Image>
 
                            <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                                <!-- user name, link -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,5,5">
                                    <TextBlock Text="{Binding Path=User.Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" 
                                               ToolTipService.ShowDuration="60000" VerticalAlignment="Center">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Username}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=User.Url}" Margin="10,0,0,0"/>
                                    <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" VerticalAlignment="Center" ToolTipService.ShowDuration="60000" Margin="10,0,0,0">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                </StackPanel>

                                <!-- shout details -->
                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <Border BorderThickness="0" BorderBrush="Navy" Background="{StaticResource GreenGradientBrush}" Padding="6,3,3,3" CornerRadius="4">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Said" Foreground="White" FontWeight="Bold" FontSize="12" VerticalAlignment="Center"/>
                                            <Image Height="16" Width="16" Source="/Images/trakt-icon-shouts.png" Margin="10,0,2,0"/>
                                        </StackPanel>
                                    </Border>

                                    <TextBlock Text="{Binding Path=ElapsedShort}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    <TextBlock Text="ago" Foreground="Black" Margin="5,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" FontSize="14" DisplayText="{Binding Path=Shout.ShowTitle}" 
                                        URL="{Binding Path=Shout.TraktShow.url}" Margin="0,0,0,0"/>

                                    <!-- show pinned series button -->
                                    <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center" Command="{DynamicResource ShowPinnedSeriesCommand}" 
                                            CommandParameter="{Binding}"
                                            Visibility="{Binding Shout.HasAnimeSeries, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                            </Image.ToolTip>
                                        </Image>
                                    </Button>

                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" Foreground="DarkGreen" FontSize="14" 
                                        DisplayText="{Binding Path=Shout.EpisodeDescription}" URL="{Binding Path=Shout.Episode_Url}" Margin="10,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Anime Poster  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  Margin="5,3,5,0"
                               HorizontalAlignment="Left" ToolTipService.ShowDuration="60000"
                               Source="{Binding AnimeImagePathForDisplay}">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                               Source="{Binding AnimeImagePathForDisplay}" 
                                                Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- Shout text  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" Background="FloralWhite">
                        <TextBlock MinWidth="200" MaxWidth="400" Text="{Binding Shout.Text}" Foreground="Black" HorizontalAlignment="Left" Margin="5,5,5,5" FontSize="12"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                                   VerticalAlignment="Top" TextWrapping="Wrap" ToolTipService.ShowDuration="60000">
                            <TextBlock.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <TextBlock Width="600" Text="{Binding Shout.Text}" Foreground="Black"  HorizontalAlignment="Left" Margin="5,5,5,5" FontSize="12"
                                                   VerticalAlignment="Top" TextWrapping="Wrap"/>
                                    </Grid>
                                </Border>
                            </TextBlock.ToolTip>
                        </TextBlock>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- TraktActivityShoutShowTemplate -->
            <DataTemplate x:Key="TraktActivityShoutShowTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal">
                            <!-- user avatar -->
                            <Image Height="60"  Margin="5,3,10,0"
                                   HorizontalAlignment="Left" ToolTipService.ShowDuration="60000"
                                   Source="{Binding UserImagePathForDisplay}">
                                <Image.ToolTip>
                                    <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>

                                            <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                                   Source="{Binding UserImagePathForDisplay}" 
                                                   Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            </Image>
                                        </Grid>
                                    </Border>
                                </Image.ToolTip>
                            </Image>

                            <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                                <!-- user name, link -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,5,5">
                                    <TextBlock Text="{Binding Path=User.Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" 
                                               VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Username}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=User.Url}" Margin="10,0,0,0"/>
                                    <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" VerticalAlignment="Center" ToolTipService.ShowDuration="60000" Margin="10,0,0,0">
                                        <TextBlock.ToolTip>
                                            <TextBlock Text="{Binding Path=User.Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                </StackPanel>

                                <!-- shout details -->
                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <Border BorderThickness="0" BorderBrush="Navy" Background="{StaticResource GreenGradientBrush}" Padding="6,3,3,3" CornerRadius="4">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Said" Foreground="White" FontWeight="Bold" FontSize="12" VerticalAlignment="Center"/>
                                            <Image Height="16" Width="16" Source="/Images/trakt-icon-shouts.png" Margin="10,0,2,0"/>
                                        </StackPanel>
                                    </Border>

                                    <TextBlock Text="{Binding Path=ElapsedShort}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    <TextBlock Text="ago" Foreground="Black" Margin="5,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                    <usercontrols:HyperLinkStandard VerticalAlignment="Center" FontSize="14" DisplayText="{Binding Path=Shout.ShowTitle}" 
                                        URL="{Binding Path=Shout.TraktShow.url}" Margin="0,0,0,0"/>

                                    <!-- show pinned series button -->
                                    <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center" Command="{DynamicResource ShowPinnedSeriesCommand}" 
                                            CommandParameter="{Binding}"
                                            Visibility="{Binding Shout.HasAnimeSeries, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                            <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000">
                                                <Image.ToolTip>
                                                    <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                                </Image.ToolTip>
                                            </Image>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Anime Poster -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  Margin="5,3,5,0"
                               HorizontalAlignment="Left" ToolTipService.ShowDuration="60000"
                               Source="{Binding AnimeImagePathForDisplay}">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="200" 
                                               Source="{Binding AnimeImagePathForDisplay}" 
                                               Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- Shout text  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" Background="FloralWhite">
                        <TextBlock MinWidth="200" MaxWidth="400" Foreground="Black"  Text="{Binding Shout.Text}" HorizontalAlignment="Left" Margin="5,5,5,5" FontSize="12"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                                   ToolTipService.ShowDuration="60000"  VerticalAlignment="Top" TextWrapping="Wrap">
                            <TextBlock.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <TextBlock Width="600" Text="{Binding Shout.Text}" HorizontalAlignment="Left" Margin="5,5,5,5" FontSize="12"
                                                   VerticalAlignment="Top" TextWrapping="Wrap"/>
                                    </Grid>
                                </Border>
                            </TextBlock.ToolTip>
                        </TextBlock>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- MylistVotesDownloadTemplate -->
            <DataTemplate x:Key="MylistVotesDownloadTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- Prompt text -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal" Margin="10,10,10,5">
                            <Image Height="16" Width="16" Source="/Images/32_Info.png" Margin="0,0,5,0"/>
                            <TextBlock Text="No recommendations could be found." FontWeight="Bold" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="1,0,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Horizontal" Margin="10,10,10,5">
                            <TextBlock Text="Download your votes now, or vote on an anime to start getting recommendations." VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Border>


                    <!-- sync votes button -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Background="FloralWhite" Grid.ColumnSpan="1">
                        <Button Name="btnSyncVotes" Margin="10,5,10,10" Style="{DynamicResource RoundButtonStyle}" Foreground="Black"
                                Command="{DynamicResource SyncVotesCommand}" CommandParameter="{Binding}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/32_sync.png" Margin="0,0,5,0"/>
                                <TextBlock VerticalAlignment="Center" Text="Sync Votes" Foreground="Black"  Margin="0,0,5,0"/>
                            </StackPanel>
                        </Button>
                    </Border>

                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="2" Background="FloralWhite" Grid.ColumnSpan="2">
                    </Border>
                </Grid>
            </DataTemplate>
            
            <!-- RecentAdditionsEpisode_Detailed -->
            <DataTemplate x:Key="RecentAdditionsEpisode_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid x:Name="Container">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- Episode overview -->
                        <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Grid.Row="2" Grid.Column="0"
                                    Height="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecentAdditions_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecentAdditions_Height}"/>
                            </Border>

                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="4,-28,0,4" VerticalAlignment="Bottom" Grid.Row="2" Grid.Column="0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}"
                                    Command="{StaticResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" ToolTip="Play">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play2.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Play}" Foreground="Black" Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <!-- Anime name and episode details -->
                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Show pinned series button -->
                            <Button Margin="7,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                    ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"
                                    ToolTipService.ShowDuration="60000" Grid.Row="0" Grid.Column="1">
                                <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0"/>
                            </Button>
                            
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" Grid.Row="0" Grid.Column="0"/>
                        </Grid>

                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"
                                   Grid.Row="1" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=Container}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecentAdditionsSeries_Detailed -->
            <DataTemplate x:Key="RecentAdditionsSeries_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5" Grid.Row="1" Grid.Column="0">
                            <TextBlock Text="Added" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding Path=DateTimeCreatedAsString}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="0" x:Name="pnlSeriesOverview"
                                    Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecentAdditions_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDB_Anime.DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecentAdditions_Height}"/>
                            </Border>

                            <!-- Anime description  -->
                            <TextBlock MaxWidth="200" Text="{Binding Path=Description}" Foreground="Black"  HorizontalAlignment="Left"
                                       VerticalAlignment="Top" TextWrapping="Wrap" Margin="5,0,0,0">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Description}" MaxWidth="300" VerticalAlignment="Top" TextWrapping="Wrap"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                        </StackPanel>

                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlSeriesOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0">
                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=AniDB_Anime.AnimeID}"
                                                                URL="{Binding Path=AniDB_Anime.AniDB_SiteURL}" Margin="7,0,0,0"/>

                                <!-- Show pinned series button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                        ToolTip="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"
                                        ToolTipService.ShowDuration="60000">
                                    <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="1,0,1,0"/>
                                </Button>
                            </StackPanel>

                            <TextBlock Text="{Binding Path=SeriesName}" Style="{StaticResource ResourceKey=DashAnimeTitle}"
                                       Grid.Column="0" Grid.Row="0"/>
                        </Grid>
                    </Grid>
                </Border>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.CommandBindings>
        <CommandBinding Command="{StaticResource PlayEpisodeCommand}" Executed="CommandBinding_PlayEpisode" />
        <CommandBinding Command="{StaticResource PlayAllUnwatchedEpisodeCommand}" Executed="CommandBinding_PlayAllUnwatchedEpisode" />
        <CommandBinding Command="{StaticResource ToggleWatchedStatusCommand}" Executed="CommandBinding_ToggleWatchedStatus" />
        <CommandBinding Command="{StaticResource IgnoreAnimeWatchCommand}" Executed="CommandBinding_IgnoreAnimeWatch" />
        <CommandBinding Command="{StaticResource IgnoreAnimeDownloadCommand}" Executed="CommandBinding_IgnoreAnimeDownload" />

        <CommandBinding Command="{StaticResource MoveUpWidgetCommand}" Executed="CommandBinding_MoveUpWidget" />
        <CommandBinding Command="{StaticResource MoveDownWidgetCommand}" Executed="CommandBinding_MoveDownWidget" />

        
        <CommandBinding Command="{StaticResource SyncVotesCommand}" Executed="CommandBinding_SyncVotes" />
        <CommandBinding Command="{StaticResource FriendRequestApproveCommand}" Executed="CommandBinding_FriendRequestApprove" />
        <CommandBinding Command="{StaticResource FriendRequestDenyCommand}" Executed="CommandBinding_FriendRequestDeny" />
    </UserControl.CommandBindings>

    <DockPanel LastChildFill="True">
        <!-- Toolbar -->
        <Border Style="{DynamicResource ToolbarBorderControlStyle}" DockPanel.Dock="Top">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,0" Background="#F1F1F1">
                <!-- Refresh -->
                <Button x:Name="btnToolbarRefresh" Margin="2,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/16_Refresh.png" Margin="0,0,5,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Refresh}" Margin="0,0,5,0"/>
                    </StackPanel>
                </Button>

                <!-- Edit Dashboard -->
                <Button x:Name="btnEditDashboard" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}"
                        Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsReadOnly, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/32_folder_edit.png" Margin="0,0,3,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Edit}" Margin="0,0,0,0"/>
                    </StackPanel>
                </Button>

                <!-- Finish Editing Dashboard -->
                <Button Name="btnEditDashboardFinish" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}"
                                    Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/32_folder_edit.png" Margin="0,0,3,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=FinishEditing}" Margin="0,0,0,0"/>
                    </StackPanel>
                </Button>

                <!-- Toggle Dash -->
                <Button Name="btnToggleDash" Margin="12,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/Metro/MetroDash2_16.png" Margin="0,0,3,0"/>
                        <TextBlock VerticalAlignment="Center" Text="Metro Dash" Margin="0,0,5,0"/>
                    </StackPanel>
                </Button>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center"
                            Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsLoadingData, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Loading}" Margin="10,0,0,0" FontWeight="Bold"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" x:Name="ScrollerDash" Grid.Column="0" Grid.Row="0" Margin="5">
            <StackPanel Orientation="Vertical" Width="{Binding ElementName=ScrollerDash, Path=ViewportWidth}">
                <!-- widgets -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- watch next episode widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_WatchNextEpisode_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="1">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="1">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Widget Style -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <ComboBox Name="cboDashWatchNextStyle" VerticalAlignment="Center"></ComboBox>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsWatchNext" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button x:Name="btnWatchNextIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button x:Name="btnWatchNextReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashWatchNext" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_WatchNextEp_Recent}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_WatchNextEpisode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource DashWatchNextTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewEpsWatchNext_Recent}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- series missing episodes widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                            Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="2">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="2">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsMissingEps" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MissingEps_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnMissingEpsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnMissingEpsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashSeriesMissingEpisodes" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_SeriesMissingEps}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>

                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{StaticResource SeriesMissingEpsTemplate}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewSeriesMissingEps}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- mini calendar widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                            Grid.Row="{Binding Path=DashPos_MiniCalendar_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">
                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="3">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="3">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Days -->
                            <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Days}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udDaysMiniCalendar" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MiniCalendarDays}" />
                            </StackPanel>

                            <!-- Other Options -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="Upcoming Only" Margin="0,0,5,0"/>
                                <CheckBox Name="chkCalUpcomingOnly" IsChecked="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MiniCalendarUpcomingOnly}" VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnMiniCalendarIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnMiniCalendarReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashMiniCalendar" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_MiniCalendar}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Force Calendar Refresh -->
                            <Button Name="btnForceCalendarRefresh" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_sync.png" Margin="0,0,3,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="Update Calendar Data" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                            <StackPanel />
                        </StackPanel>
                    </Border>

                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_MiniCalendar, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{StaticResource MiniCalendarTemplate}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewMiniCalendar}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recommendation to watch widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_RecWatch_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="4">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="4">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown x:Name="udItemsRecWatch" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=Dash_RecWatch_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecWatchIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnRecWatchReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandRecWatch" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_RecWatch}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecWatch, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource RecWatchTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewRecommendationsWatch}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recommendation to download widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_RecDownload_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="5">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="5">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsRecDownload" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecDownloadIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecDownloadReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandRecDownload" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_RecDownload}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Update Series Info -->
                            <Button Name="btnGetRecDownloadMissingInfo" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/anidb.ico" Margin="0,0,3,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=GetMissingData}" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecDownload, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource RecDownloadTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewRecommendationsDownload}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- trakt friends widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_TraktFriends_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="6">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="6">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsTraktFriends" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Items}" />
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=TraktAnimeOnly}" Margin="0,0,5,0"/>
                                <CheckBox Name="chkTraktAnimeOnly" IsChecked="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_AnimeOnly}" VerticalAlignment="Center"
                                ToolTip="{usercontrols:Info Title={Resx ResxName=JMMClient.Properties.Resources, Key=TraktAnimeOnly}, 
                                                Body={Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_TraktAnimeOnly}}"/>
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnTraktFriendsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnTraktFriendsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandTraktFriends" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_TraktFriends}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>


                                </StackPanel>

                            </Button>

                            <!-- Force Trakt Refresh -->
                            <Button Name="btnForceTraktRefresh" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_sync.png" Margin="0,0,3,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ForceRefresh}" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <ToggleButton IsChecked="True" Name="togTraktScrobbles" Content="Scrobbles" Margin="10,2,2,2" VerticalAlignment="Center" Style="{DynamicResource ToggleButtonStyle}"/>
                            <ToggleButton IsChecked="True" Name="togTraktShouts" Content="Shouts" Margin="7,2,2,2" VerticalAlignment="Center" Style="{DynamicResource ToggleButtonStyle}"/>

                            <!-- Notes -->
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=TraktFriendNotes}" Foreground="DarkGray" Margin="10,0,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_TraktFriends, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource TraktTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewTraktActivity}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recently watched episode widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecentlyWatchedEpisode_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="7">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="7">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>


                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsRecentEpisodes" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecentlyWatchedEp_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecentEpisodesIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecentEpisodesReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashRecentEpisodes" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentlyWatchEpsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentlyWatchEpsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_RecentEpisodes}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                            <StackPanel />
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecentlyWatchedEpisode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentlyWatchEpsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{DynamicResource RecentlyWatchedEpisodeTemplate}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewEpsWatchedRecently}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recent additions widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecentAdditions_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="8">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="8">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>
                            </StackPanel>



                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <extToolkit:IntegerUpDown Name="udItemsRecentAdditions" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecentAdditions_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecentAdditionsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecentAdditionsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashRecentAdditions" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentAdditionsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentAdditionsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="Recent Additions" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Widget Style -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" >
                                <ComboBox Name="cboDashRecentAdditionsType" VerticalAlignment="Center"></ComboBox>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecentAdditions, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecentAdditionsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource DashRecentAdditionsTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewRecentAdditions}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</UserControl>
