<UserControl x:Class="Shoko.Desktop.UserControls.DashboardControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:usercontrols="clr-namespace:Shoko.Desktop.UserControls"
             xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
             xmlns:local="clr-namespace:Shoko.Desktop.ViewModel"
             xmlns:mwt="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:viewModel="clr-namespace:Shoko.Desktop.ViewModel"
             xmlns:customToolTips="clr-namespace:Shoko.Desktop.UserControls.Custom_ToolTips"
             xmlns:dataTemplateSelectors="clr-namespace:Shoko.Desktop.DataTemplateSelectors"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ShokoDesktop;component/Resources/Styles.xaml" />
                <ResourceDictionary Source="/ShokoDesktop;component/Resources/DashboardStyles.xaml" />
                <ResourceDictionary Source="/ShokoDesktop;component/Resources/MainListStyles.xaml" />
                <ResourceDictionary Source="/ShokoDesktop;component/Resources/MainListContent.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <dataTemplateSelectors:DashWatchNextTemplateSelector x:Key="DashWatchNextTemplateSelector"/>
            <dataTemplateSelectors:RecWatchTemplateSelector x:Key="RecWatchTemplateSelector"/>
            <dataTemplateSelectors:RecDownloadTemplateSelector x:Key="RecDownloadTemplateSelector"/>
            <dataTemplateSelectors:DashRecentAdditionsTemplateSelector x:Key="DashRecentAdditionsTemplateSelector"/>

            <RoutedUICommand x:Key="PlayEpisodeCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=PlayEpisodeCommand}" />
            <RoutedUICommand x:Key="PlayAllUnwatchedEpisodeCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=PlayAllUnwatchedEpisodeCommand}" />
            <RoutedUICommand x:Key="ToggleWatchedStatusCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ToggleWatchedStatusCommand}" />
            <RoutedUICommand x:Key="IgnoreAnimeWatchCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=IgnoreAnimeWatchCommand}" />
            <RoutedUICommand x:Key="IgnoreAnimeDownloadCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=IgnoreAnimeDownloadCommand}" />

            <RoutedUICommand x:Key="MoveUpWidgetCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=MoveUpWidgetCommand}" />
            <RoutedUICommand x:Key="MoveDownWidgetCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=MoveDownWidgetCommand}" />

            <RoutedUICommand x:Key="SyncVotesCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=SyncVotesCommand}" />
            <RoutedUICommand x:Key="FriendRequestApproveCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=FriendRequestApproveCommand}" />
            <RoutedUICommand x:Key="FriendRequestDenyCommand" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=FriendRequestDenyCommand}" />

            <!-- WatchNextTemplate -->
            <DataTemplate x:Key="WatchNextTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <StackPanel Orientation="Vertical">
                        <!-- Anime name and episode details -->
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" MinWidth="{Binding Path=ActualWidth, ElementName=pnlButtons}"
                                    MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_WatchNext_Height}">
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" />
                            <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"/>
                        </StackPanel>

                        <!-- Anime image -->
                        <StackPanel Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_WatchNext_Height}"
                                    Orientation="Horizontal">
                            <Border BorderThickness="1" BorderBrush="DarkGray" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_WatchNext_Height}">
                                    <Image.ToolTip>
                                        <customToolTips:CustomToolTip>
                                            <customToolTips:DashboardEpisodeOverviewTooltipContent/>
                                        </customToolTips:CustomToolTip>
                                    </Image.ToolTip>
                                </Image>
                            </Border>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,0" x:Name="pnlButtons">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/32_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_resume.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Play}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                       ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"/>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </DataTemplate>

            <!-- WatchNextTemplate_Detailed -->
            <DataTemplate x:Key="WatchNextTemplate_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid x:Name="Container">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- Episode overview -->
                        <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Grid.Row="2" Grid.Column="0"
                                    Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_WatchNext_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_WatchNext_Height}"/>
                            </Border>

                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="4,-28,0,4" VerticalAlignment="Bottom"
                                    Grid.Row="2" Grid.Column="0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Image Height="16" Width="16" Source="/Images/32_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/32_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}"
                                    Command="{StaticResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Play}">
                                <Image Height="16" Width="16" Source="/Images/32_resume.png" Margin="2,0,3,0"/>
                            </Button>

                            <!-- Play all episodes button -->
                            <Button x:Name="btnPlayAll" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" Command="{StaticResource PlayAllUnwatchedEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" Visibility="{Binding Path=MultipleUnwatchedEpsSeries, Converter={StaticResource BooleanToVisibilityConverter}}"
                                    ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PlayAll}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play_all.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Binding Path=UnwatchedEpCountSeries}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <!-- Anime name and episode details -->
                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Show pinned series button -->
                            <Button Margin="7,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                    ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"
                                    ToolTipService.ShowDuration="60000" Grid.Row="0" Grid.Column="1">
                                <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="2,0,2,0"/>
                            </Button>
                            
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" Grid.Column="0" Grid.Row="0"/>
                        </Grid>

                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"
                                   Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left"
                                   MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecentlyWatchedEpisodeTemplate -->
            <DataTemplate x:Key="RecentlyWatchedEpisodeTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <StackPanel Orientation="Vertical">
                        <!-- Anime name and episode details -->
                        <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}"/>
                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"/>
                        
                        <StackPanel Orientation="Horizontal" Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecentlyWatchedEp_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecentlyWatchedEp_Height}"/>
                            </Border>
                            
                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>
                        
                        <!-- Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Visibility="{Binding Path=HasFiles, Converter={StaticResource BooleanToVisibilityConverter}}"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/32_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_resume.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Play}" Foreground="Black"  Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                       ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"/>
                            </Button>

                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=LastWatched}" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <TextBlock Text="{Binding Path=WatchedDateAsString}" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </DataTemplate>
            
            <!-- SeriesMissingEpsTemplate -->
            <DataTemplate x:Key="SeriesMissingEpsTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <DockPanel>
                        <StackPanel Orientation="Vertical" x:Name="pnlDetails" DockPanel.Dock="Bottom">
                            <!-- Anime image -->
                            <StackPanel Orientation="Horizontal" Margin="0,5,0,5"
                                        Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_MissingEps_Height}">
                                <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                           MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_MissingEps_Height}"/>
                                </Border>
                            </StackPanel>
                            
                            <Grid HorizontalAlignment="Left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                            
                                <!-- Show pinned series button -->
                                <Button Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center" Margin="0,0,5,0"
                                        Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                        Grid.Column="0" Grid.Row="0" Grid.RowSpan="2">
                                    <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"/>
                                </Button>

                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=LatestEp_Anime}" Foreground="Black"
                                           VerticalAlignment="Center" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="0"/>
                                <TextBlock Text="{Binding Path=AniDBAnime.AniDBAnime.LatestEpisodeNumber}" Foreground="Black" FontWeight="Bold"
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="0" Margin="8,0,0,0"/>
                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=MissingEpisodeCount}" Foreground="Black"
                                           VerticalAlignment="Center" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="1"/>
                                <TextBlock Text="{Binding Path=MissingEpisodeCountGroups}" Foreground="Black" FontWeight="Bold" Margin="8,0,0,0"
                                           VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1"/>
                            </Grid>
                        </StackPanel>

                        <TextBlock Text="{Binding Path=SeriesName}" DockPanel.Dock="Top" Style="{StaticResource DashAnimeTitle}"
                                   MaxWidth="{Binding Path=ActualWidth, ElementName=pnlDetails}" FontSize="11"/>
                    </DockPanel>
                </Border>
            </DataTemplate>

            <!-- MiniCalendarTemplate -->
            <DataTemplate x:Key="MiniCalendarTemplate">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- AniDB link -->
                        <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=AnimeID_Friendly}"
                                                        URL="{Binding Path=AniDB_SiteURL}" Grid.Row="1" Grid.Column="0"/>

                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Grid.Row="2" Grid.Column="0" x:Name="pnlImageAndInfo">
                            <!-- Anime image -->
                            <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Margin="0,5,0,5"
                                        Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_MiniCalendar_Height}">
                                <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Image Source="{Binding Path=DefaultPosterPath}" Style="{StaticResource DashAnimePoster}"
                                           MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_MiniCalendar_Height}"/>
                                </Border>
                            </StackPanel>
                        
                            <!-- Info -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <!-- Show create series from button -->
                                <Button Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center" ToolTipService.ShowDuration="60000"
                                        ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_CreateSeries}"
                                        Command="{DynamicResource ResourceKey=CreateSeriesFromAnimeCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/32_television.png" Margin="2,0,2,0"/>
                                </Button>

                                <!-- Bookmark anime button -->
                                <Button Margin="5,0,0,0" Style="{StaticResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ResourceKey=BookmarkAnimeCommand}" CommandParameter="{Binding}"
                                        ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Bookmark}" ToolTipService.ShowDuration="60000">
                                    <Image Height="16" Width="16" Source="/Images/16_bookmark.png" Margin="1,0,1,0"/>
                                </Button>

                                <!-- Download button -->
                                <Button Margin="5,0,2,0" Style="{StaticResource FlatButtonStyle}" VerticalAlignment="Center"
                                        x:Name="btnSearchDownloads" ToolTipService.ShowDuration="60000"
                                        Command="{DynamicResource ResourceKey=ShowTorrentSearchCommand}" CommandParameter="{Binding}"
                                        ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Download}">
                                    <Image Height="16" Width="16" Source="/Images/24_download.png" Margin="2,0,2,0"/>
                                </Button>

                                <Image Height="16" Width="16" Source="/Images/24_calendar.png" Margin="5,0,5,0" VerticalAlignment="Center"/>
                                <TextBlock Padding="5" Foreground="Black"  Text="{Binding Path=AirDateAsString}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="{Binding Path=FormattedTitle}" Style="{StaticResource DashAnimeTitle}" FontSize="11"
                                   Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlImageAndInfo}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecWatch_Detailed -->
            <DataTemplate x:Key="RecWatch_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- show pinned series button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource IgnoreAnimeWatchCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/16_cancel.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_IgnoreAnimeWatch}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Download_Approval}" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200"  Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecWatch_Height}"
                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_YourVote}" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- RecDownload_Detailed -->
            <DataTemplate x:Key="RecDownload_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14"
                                           VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource IgnoreAnimeDownloadCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/16_cancel.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_IgnoreAnimeDownload}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- bookmark anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource BookmarkAnimeCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/16_bookmark.png" Margin="1,0,1,0" ToolTipService.ShowDuration="60000">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Bookmark}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>

                                <!-- download button -->
                                <Button Grid.Column="3"  Margin="5,0,2,0" Style="{DynamicResource FlatButtonStyle}" VerticalAlignment="Center" Name="btnSearchDownloads"
                                        Command="{DynamicResource ShowTorrentSearchCommand}" CommandParameter="{Binding}">
                                    <Image Height="16" Width="16" Source="/Images/24_download.png" Margin="2,0,2,0">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Download}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </Button>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Download_Approval}" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock MaxWidth="200"  Text="{Binding Recommended_Description}" Foreground="Black"  HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecDownload_Height}"
                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center" ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_YourVote}" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}" ToolTipService.ShowDuration="60000">
                            <Image.Effect>
                                <DropShadowEffect Opacity="0.5"/>
                            </Image.Effect>
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                               Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- MylistVotesDownloadTemplate -->
            <DataTemplate x:Key="MylistVotesDownloadTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- Prompt text -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal" Margin="10,10,10,5">
                            <Image Height="16" Width="16" Source="/Images/32_info.png" Margin="0,0,5,0"/>
                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_NoRecommend}" FontWeight="Bold" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="1,0,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Horizontal" Margin="10,10,10,5">
                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_DownloadVotes}" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Border>


                    <!-- sync votes button -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Background="FloralWhite" Grid.ColumnSpan="1">
                        <Button Name="btnSyncVotes" Margin="10,5,10,10" Style="{DynamicResource RoundButtonStyle}" Foreground="Black"
                                Command="{DynamicResource SyncVotesCommand}" CommandParameter="{Binding}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/32_sync.png" Margin="0,0,5,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_SyncVotes}" Foreground="Black"  Margin="0,0,5,0"/>
                            </StackPanel>
                        </Button>
                    </Border>

                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="2" Background="FloralWhite" Grid.ColumnSpan="2">
                    </Border>
                </Grid>
            </DataTemplate>
            
            <!-- RecentAdditionsEpisode_Detailed -->
            <DataTemplate x:Key="RecentAdditionsEpisode_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid x:Name="Container">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!-- Episode overview -->
                        <StackPanel Orientation="Horizontal" x:Name="pnlEpOverview" Grid.Row="2" Grid.Column="0"
                                    Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecentAdditions_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecentAdditions_Height}"/>
                            </Border>

                            <usercontrols:DashboardEpisodeOverview/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="4,-28,0,4" VerticalAlignment="Bottom" Grid.Row="2" Grid.Column="0">
                            <!-- Toggle watched button -->
                            <Button x:Name="btnToggleWatched" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{StaticResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_eye.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Watched}"/>
                                    <Image Height="16" Width="16" Source="/Images/32_eye2.png" Margin="2,0,2,0" ToolTipService.ShowDuration="60000"
                                           Visibility="{Binding Path=Watched, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                                           ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button x:Name="btnPlay" Margin="5,0,0,0" Style="{StaticResource RoundButtonStyle}"
                                    Command="{StaticResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                                    VerticalAlignment="Center" ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Play}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_resume.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Play}" Foreground="Black" Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <!-- Anime name and episode details -->
                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlEpOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Show pinned series button -->
                            <Button Margin="7,0,0,0" Style="{StaticResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                    ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"
                                    ToolTipService.ShowDuration="60000" Grid.Row="0" Grid.Column="1">
                                <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="2,0,2,0"/>
                            </Button>
                            
                            <TextBlock Text="{Binding Path=AnimeName}" Style="{StaticResource DashAnimeTitle}" Grid.Row="0" Grid.Column="0"/>
                        </Grid>

                        <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Margin="0,3,0,8" Style="{StaticResource DashEpisodeNumberAndName}"
                                   Grid.Row="1" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=Container}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <!-- RecentAdditionsSeries_Detailed -->
            <DataTemplate x:Key="RecentAdditionsSeries_Detailed">
                <Border Style="{StaticResource DashItemBorder}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5" Grid.Row="1" Grid.Column="0">
                            <TextBlock Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Added}" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding Path=DateTimeCreatedAsString}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="0" x:Name="pnlSeriesOverview"
                                    Height="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecentAdditions_Height}">
                            <!-- Anime image -->
                            <Border BorderThickness="1" BorderBrush="DarkGray" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Image Source="{Binding Path=AniDBAnime.AniDBAnime.PosterPathWithRandoms}" Style="{StaticResource DashAnimePoster}"
                                       MaxWidth="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecentAdditions_Height}"/>
                            </Border>

                            <!-- Anime description  -->
                            <TextBlock MaxWidth="200" Text="{Binding Path=Description}" Foreground="Black"  HorizontalAlignment="Left"
                                       VerticalAlignment="Top" TextWrapping="Wrap" Margin="5,0,0,0">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Description}" MaxWidth="300" VerticalAlignment="Top" TextWrapping="Wrap"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                        </StackPanel>

                        <Grid Grid.Row="0" Grid.Column="0" MaxWidth="{Binding Path=ActualWidth, ElementName=pnlSeriesOverview}"
                              HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0">
                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=AniDBAnime.AniDBAnime.AnimeID}"
                                                                URL="{Binding Path=AniDBAnime.AniDBAnime.AniDB_SiteURL}" Margin="7,0,0,0"/>

                                <!-- Show pinned series button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ResourceKey=ShowPinnedSeriesCommand}" CommandParameter="{Binding}"
                                        ToolTip="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Tooltip_PinSeries}"
                                        ToolTipService.ShowDuration="60000">
                                    <Image Height="16" Width="16" Source="/Images/32_pin.png" Margin="1,0,1,0"/>
                                </Button>
                            </StackPanel>

                            <TextBlock Text="{Binding Path=SeriesName}" Style="{StaticResource ResourceKey=DashAnimeTitle}"
                                       Grid.Column="0" Grid.Row="0"/>
                        </Grid>
                    </Grid>
                </Border>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.CommandBindings>
        <CommandBinding Command="{StaticResource PlayEpisodeCommand}" Executed="CommandBinding_PlayEpisode" />
        <CommandBinding Command="{StaticResource PlayAllUnwatchedEpisodeCommand}" Executed="CommandBinding_PlayAllUnwatchedEpisode" />
        <CommandBinding Command="{StaticResource ToggleWatchedStatusCommand}" Executed="CommandBinding_ToggleWatchedStatus" />
        <CommandBinding Command="{StaticResource IgnoreAnimeWatchCommand}" Executed="CommandBinding_IgnoreAnimeWatch" />
        <CommandBinding Command="{StaticResource IgnoreAnimeDownloadCommand}" Executed="CommandBinding_IgnoreAnimeDownload" />

        <CommandBinding Command="{StaticResource MoveUpWidgetCommand}" Executed="CommandBinding_MoveUpWidget" />
        <CommandBinding Command="{StaticResource MoveDownWidgetCommand}" Executed="CommandBinding_MoveDownWidget" />

        
        <CommandBinding Command="{StaticResource SyncVotesCommand}" Executed="CommandBinding_SyncVotes" />
    </UserControl.CommandBindings>

    <DockPanel LastChildFill="True">
        <!-- Toolbar -->
        <Border Style="{DynamicResource ToolbarBorderControlStyle}" DockPanel.Dock="Top">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,0" Background="#F1F1F1">
                <!-- Refresh -->
                <Button x:Name="btnToolbarRefresh" Margin="2,2,5,2" Style="{DynamicResource FlatButtonStyle}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/32_refresh.png" Margin="0,0,5,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Refresh}" Margin="0,0,0,0"/>
                    </StackPanel>
                </Button>

                <!-- Edit Dashboard -->
                <Button x:Name="btnEditDashboard" Margin="0,2,5,2" Style="{DynamicResource FlatButtonStyle}"
                        Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsReadOnly, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/32_edit.png" Margin="0,0,5,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Edit}" Margin="0,0,0,0"/>
                    </StackPanel>
                </Button>

                <!-- Finish Editing Dashboard -->
                <Button Name="btnEditDashboardFinish" Margin="0,2,5,2" Style="{DynamicResource FlatButtonStyle}"
                                    Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/32_edit_accept.png" Margin="0,0,5,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=FinishEditing}" Margin="0,0,0,0"/>
                    </StackPanel>
                </Button>

                <!-- Toggle Dash -->
                <Button Name="btnToggleDash" Margin="0,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <Image Height="16" Width="16" Source="/Images/Metro/MetroDash2_16.png" Margin="0,0,5,0"/>
                        <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Metro}" Margin="0,0,5,0"/>
                    </StackPanel>
                </Button>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center"
                            Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsLoadingData, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Loading}" Margin="10,0,0,0" FontWeight="Bold"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" x:Name="ScrollerDash" Grid.Column="0" Grid.Row="0" Margin="5">
            <StackPanel Orientation="Vertical" Width="{Binding ElementName=ScrollerDash, Path=ViewportWidth}">
                <!-- widgets -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- watch next episode widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_WatchNextEpisode_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="1">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="1">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Widget Style -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <ComboBox Name="cboDashWatchNextStyle" VerticalAlignment="Center"></ComboBox>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udItemsWatchNext" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_WatchNext_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button x:Name="btnWatchNextIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button x:Name="btnWatchNextReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashWatchNext" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashWatchNextEpCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_WatchNextEp_Recent}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_WatchNextEpisode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource DashWatchNextTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewEpsWatchNext_Recent}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- series missing episodes widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                            Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="2">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="2">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udItemsMissingEps" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_MissingEps_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnMissingEpsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnMissingEpsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashSeriesMissingEpisodes" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashSeriesMissingEpisodesCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_SeriesMissingEps}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>

                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{StaticResource SeriesMissingEpsTemplate}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewSeriesMissingEps}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- mini calendar widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                            Grid.Row="{Binding Path=DashPos_MiniCalendar_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">
                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="3">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="3">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Days -->
                            <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Days}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udDaysMiniCalendar" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_MiniCalendarDays}" />
                            </StackPanel>

                            <!-- Other Options -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="Upcoming Only" Margin="0,0,5,0"/>
                                <CheckBox Name="chkCalUpcomingOnly" IsChecked="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_MiniCalendarUpcomingOnly}" VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnMiniCalendarIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnMiniCalendarReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashMiniCalendar" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashMiniCalendarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_MiniCalendar}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Force Calendar Refresh -->
                            <Button Name="btnForceCalendarRefresh" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_sync.png" Margin="0,0,3,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_UpdateCalendar}" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                            <StackPanel />
                        </StackPanel>
                    </Border>

                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_MiniCalendar, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{StaticResource MiniCalendarTemplate}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewMiniCalendar}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recommendation to watch widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_RecWatch_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="4">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="4">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown x:Name="udItemsRecWatch" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=Dash_RecWatch_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecWatchIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button Name="btnRecWatchReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandRecWatch" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsWatchCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_RecWatch}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecWatch, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource RecWatchTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewRecommendationsWatch}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recommendation to download widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                            Grid.Row="{Binding Path=DashPos_RecDownload_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >
                        <StackPanel Orientation="Horizontal">
                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="5">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="5">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>

                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udItemsRecDownload" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecDownload_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecDownloadIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecDownloadReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandRecDownload" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsDownloadCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_RecDownload}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Update Series Info -->
                            <Button Name="btnGetRecDownloadMissingInfo" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_anidb.png" Margin="0,0,3,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=GetMissingData}" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecDownload, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource RecDownloadTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewRecommendationsDownload}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recently watched episode widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecentlyWatchedEpisode_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="7">
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="7">
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>
                                </Button>
                            </StackPanel>


                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udItemsRecentEpisodes" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecentlyWatchedEp_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecentEpisodesIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecentEpisodesReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashRecentEpisodes" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentlyWatchEpsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentlyWatchEpsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dash_RecentEpisodes}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                            <StackPanel />
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecentlyWatchedEpisode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentlyWatchEpsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplate="{DynamicResource RecentlyWatchedEpisodeTemplate}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewEpsWatchedRecently}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- recent additions widget -->
                    <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecentAdditions_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                        <StackPanel Orientation="Horizontal">

                            <!-- Buttons for moving the widget up and down -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="8">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>

                                <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="8">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                    </StackPanel>
                                </Button>
                            </StackPanel>



                            <!-- Number of Items -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                                <xctk:IntegerUpDown Name="udItemsRecentAdditions" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static viewModel:VM_UserSettings.Instance},Path=Dash_RecentAdditions_Items}" />
                            </StackPanel>

                            <!-- Widget Height Buttons -->
                            <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                                <Button Name="btnRecentAdditionsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_add.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnRecentAdditionsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Expand / Collapse -->
                            <Button Name="btnExpandDashRecentAdditions" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentAdditionsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                           Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentAdditionsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=Shoko.Commons.Properties.Resources, Key=Dashboard_Recent}" 
                                               FontWeight="Bold" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Widget Style -->
                            <StackPanel Orientation="Horizontal" Margin="10,2,2,2" >
                                <ComboBox Name="cboDashRecentAdditionsType" VerticalAlignment="Center"></ComboBox>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <ScrollViewer Grid.Column="0" Grid.ColumnSpan="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled"
                                  Grid.Row="{Binding Path=DashPos_RecentAdditions, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                                  Margin="2,0,2,5" Visibility="{Binding Source={x:Static viewModel:VM_UserSettings.Instance}, Path=DashRecentAdditionsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ItemsControl ItemTemplateSelector="{StaticResource DashRecentAdditionsTemplateSelector}"
                                      ItemsSource="{Binding Source={x:Static viewModel:VM_Dashboard.Instance}, Path=ViewRecentAdditions}" 
                                      Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</UserControl>

